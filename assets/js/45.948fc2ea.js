(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{491:function(a,e,s){"use strict";s.r(e);var t=s(2),r=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"net-core-安装配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#net-core-安装配置"}},[a._v("#")]),a._v(" .net core 安装配置")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("dotnet "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--info")]),a._v(" 查看所有版本信息（sdk、runtimes）\ndotnet --list-sdks 查看SDK版本\ndotnet --list-runtimes 查看运行环境版本\ndotnet nuget locals all "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--list")]),a._v(" 查看nuget配置信息\ndotnet tool list "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" 查看已全局安装的.net core工具\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h2",{attrs:{id:"webservices和wcf的调用和测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webservices和wcf的调用和测试"}},[a._v("#")]),a._v(" webservices和wcf的调用和测试")]),a._v(" "),e("blockquote",[e("p",[a._v(".Net Core")])]),a._v(" "),e("p",[a._v("可视化测试工具 "),e("strong",[e("font",{attrs:{color:"red"}},[a._v("Wcftestclient.exe")])],1)]),a._v(" "),e("p",[a._v("工具位置："),e("code",[a._v("D:\\DevelopFiles\\Vs2010\\Common7\\IDE")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("dotnet tool "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" dotnet-svcutil 安装wcf调用工具\ndotnet-svcutil http://172.17.1.109:3001/SerpProductService.svc?wsdl 引用服务\ndotnet-svcutil "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" ServiceReference 更新服务\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("blockquote",[e("p",[a._v(".Net FrameWork")])]),a._v(" "),e("p",[a._v("工具位置："),e("code",[a._v("C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.8 Tools\\svcutil.exe")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("svcutil http://172.17.1.109:3001/SerpProductService.svc?wsdl 引用服务\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("h2",{attrs:{id:"ef-数据迁移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ef-数据迁移"}},[a._v("#")]),a._v(" ef 数据迁移")]),a._v(" "),e("blockquote",[e("p",[a._v("先决条件，ef所需提供程序")])]),a._v(" "),e("h4",{attrs:{id:"ms-sqlserver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ms-sqlserver"}},[a._v("#")]),a._v(" MS SqlServer")]),a._v(" "),e("ul",[e("li",[a._v("install-package Microsoft.EntityFrameworkCore.SqlServer")]),a._v(" "),e("li",[a._v("install-package Microsoft.EntityFrameworkCore.Design")]),a._v(" "),e("li",[a._v("install-package Microsoft.EntityFrameworkCore.Tools")])]),a._v(" "),e("h4",{attrs:{id:"mysql-不支持-net-core-3-1类库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-不支持-net-core-3-1类库"}},[a._v("#")]),a._v(" MySql(不支持.net core 3.1类库)")]),a._v(" "),e("ul",[e("li",[a._v("install-package MySql.Data.EntityFrameworkCore")]),a._v(" "),e("li",[a._v("install-package Microsoft.EntityFrameworkCore.Design")]),a._v(" "),e("li",[a._v("install-package Microsoft.EntityFrameworkCore.Tools")])]),a._v(" "),e("blockquote",[e("p",[a._v("Ef Core CLI")])]),a._v(" "),e("p",[e("strong",[a._v("安装dotnet-ef")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("dotnet tool "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" dotnet-ef 安装最新版本ef命令行工具\ndotnet tool "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.0")]),a._v(".0 dotnet-ef 安装指定版本ef命令行工具\ndotnet tool update "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.1")]),a._v(".7 dotnet-ef 将ef core升级到某个版本\ndotnet tool update "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" dotnet-ef 将ef core升级到最新版本\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[e("strong",[a._v("迁移")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("dotnet ef migrations script 20190808074920_Add_SupplierAuditLog 执行指定的迁移日志，生成对应的sql脚本\ndotnet ef migrations "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" InitialCreate 添加迁移\ndotnet ef migrations remove 删除最新添加的一个迁移\ndotnet ef migrations list 列出迁移\ndotnet ef database update 将迁移同步到数据库\ndotnet ef database update lastgoodmigrations 将指定迁移同步到数据库，用于回退\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[e("strong",[a._v("反向工程参数说明")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("-o")]),a._v(" 实体类输出目录")]),a._v(" "),e("li",[e("strong",[a._v("-c")]),a._v(" ef上下文名称")]),a._v(" "),e("li",[e("strong",[a._v("--context-dir")]),a._v(" ef 上下文输出目录")]),a._v(" "),e("li",[e("strong",[a._v("-v")]),a._v(" 显示详细输出")]),a._v(" "),e("li",[e("strong",[a._v("-t")]),a._v(" 指定生成的表名，多个 -t a -t b ...，不增加此参数则生成生成数据库的全部表结构")]),a._v(" "),e("li",[e("strong",[a._v("-f")]),a._v(" 覆盖")]),a._v(" "),e("li",[e("strong",[a._v("--data-annotations")]),a._v(" 使用数据注解。不增加此参数默认生成"),e("code",[a._v("fluent api")]),a._v("代码")]),a._v(" "),e("li",[e("strong",[a._v("--use-database-names")]),a._v(" 使用数据库列名和表名。不增加此参数默认生成符合C#规则的列名和表名")]),a._v(" "),e("li",[e("strong",[a._v("--schema")]),a._v(" dbo 使用架构。如果使用此参数则生成dbo架构下所有表结构。-t不再起作用")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("dotnet ef dbcontext scaffold "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Server=127.0.0.1; Database=xx;uid=sa;Pwd=123"')]),a._v(" Microsoft.EntityFrameworkCore.SqlServer "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" Models "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" RecruitDbContext --context-dir ./ "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" HR_Application --use-database-names "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("blockquote",[e("p",[a._v("Nuget CLI")])]),a._v(" "),e("p",[e("strong",[a._v("反向工程参数说明")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("-Tables")]),a._v(" a,b,c 指定表，如果要抓取数据库所有表则不加此参数")]),a._v(" "),e("li",[e("strong",[a._v("-Context")]),a._v(" 上下文名称")]),a._v(" "),e("li",[e("strong",[a._v("-ContextDir")]),a._v(" 上下文输出目录")]),a._v(" "),e("li",[e("strong",[a._v("-OutputDir")]),a._v(" 实体输出目录")]),a._v(" "),e("li",[e("strong",[a._v("-Namespace")]),a._v(" 命名空间")]),a._v(" "),e("li",[e("strong",[a._v("-DataAnnotations")]),a._v(" 使用数据注解。不增加此参数默认生成fluent api代码")]),a._v(" "),e("li",[e("strong",[a._v("-UseDatabaseNames")]),a._v(" 使用数据库列名和表名。不增加此参数默认生成符合C#规则的列名和表名")]),a._v(" "),e("li",[e("strong",[a._v("-Schemas")]),a._v(" dbo 使用架构。如果使用此参数则生成dbo架构下所有表结构。-Tables不再起作用")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("scaffold-dbcontext "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Server=172.17.10.210; Database=SOfficeDB;uid=sa;Pwd=1"')]),a._v(" Microsoft.EntityFrameworkCore.SqlServer "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-OutputDir")]),a._v(" Models "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ContextDir")]),a._v(" ./ "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-DataAnnotations")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-UseDatabaseNames")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Tables")]),a._v(" sys_Table1,sys_Table2 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[e("strong",[a._v("迁移")])]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("Add-Migration Upgraded_Table_SysDatadict 添加迁移\nRemove-Migration 移除最近添加的迁移\nScript-Migration from to  生成迁移脚本 from 开始的版本 to 结束的版本\nupdate-database "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" 更新到数据库  -v显示详细执行信息\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);