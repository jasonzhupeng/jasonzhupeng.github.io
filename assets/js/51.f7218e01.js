(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{488:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("Git是一款优秀的代码管理工具，拥有分布式的代码版本控制，上传下载速度快效率高，功能十分强大，是开发者首选的代码管理工具；Gitblit是一个基于git的远程代码仓库，简便好用，搭配git使用事半功倍，可以提高代码产出效率，此文通过详细步骤讲解如何在Linux上安装Gitblit搭建自己的远程仓库")]),s._v(" "),t("h2",{attrs:{id:"安装java运行环境jre"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装java运行环境jre"}},[s._v("#")]),s._v(" 安装java运行环境jre")]),s._v(" "),t("p",[s._v("由于gitblit是java开发的，依赖java环境，所以需要先安装jre。官方下载地址："),t("a",{attrs:{href:"https://www.openlogic.com/openjdk-downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.openlogic.com/openjdk-downloads"),t("OutboundLink")],1),s._v("\n直接选择jre，无需安装jdk\n"),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0602_1.png")}}),s._v("\n或者")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cd /usr/local/src\nwget https://builds.openlogic.com/downloadJDK/openlogic-openjdk-jre/8u372-b07/openlogic-openjdk-jre-8u372-b07-linux-x64.tar.gz\n")])])]),t("p",[s._v("解压安装包，重命名")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cd /usr/local/src\ntar -xzvf openlogic-openjdk-jre-8u372-b07-linux-x64.tar.gz\nmv openlogic-openjdk-jre-8u372-b07-linux-x64 java-jre\n")])])]),t("p",[s._v("配置环境变量")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 增加配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JRE_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/src/java-jre\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JRE_HOME")]),s._v("/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("验证是否安装成功，输入命令 "),t("code",[s._v("java -version")]),s._v("，出现如下界面表示已成功安装jre\n"),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0602_2.png")}})]),s._v(" "),t("h2",{attrs:{id:"下载解压gitblit源码安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载解压gitblit源码安装包"}},[s._v("#")]),s._v(" 下载解压Gitblit源码安装包")]),s._v(" "),t("p",[s._v("Gitblit官方下载地址："),t("a",{attrs:{href:"http://www.gitblit.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.gitblit.com/"),t("OutboundLink")],1),s._v("，目前最新版本是1.9.3，将源码包直接下载到服务器"),t("code",[s._v("src")]),s._v("目录")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cd /usr/local/src\nwget https://github.com/gitblit/gitblit/releases/download/v1.9.3/gitblit-1.9.3.tar.gz\ntar -xzvf gitblit-1.9.3.tar.gz\n")])])]),t("h2",{attrs:{id:"gitblit配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitblit配置"}},[s._v("#")]),s._v(" Gitblit配置")]),s._v(" "),t("p",[s._v("编辑默认配置文件"),t("code",[s._v("defaults.properties")]),s._v("，修改如下参数")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/src/gitblit-1.9.3/data/defaults.properties\n\n server.httpPort "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8999")]),s._v("\n server.httpsProt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("\n server.shutdownPort "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n git.sshPort "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29418")]),s._v("\n server.httpsBindInterface "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" localhost\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#web.siteName = my develop Hub #站点名称")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#web.allowGravatar = false #是否显示用户头像")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#web.showBranchGraph = false #概况是否显示分支图")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("编辑文件"),t("code",[s._v("service-centos.sh")]),s._v("，根据自己实际安装的路径修改参数，端口，和日志目录")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/src/gitblit-1.9.3/service-centos.sh\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITBLIT_PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/src/gitblit-1.9.3\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITBLIT_BASE_FOLDER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/src/gitblit-1.9.3/data\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITBLIT_HTTP_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8999")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITBLIT_HTTPS_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8443")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GITBLIT_LOG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/src/gitblit-1.9.3/logs/gitblit.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("创建Gitblit服务")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("cd /usr/local/src/gitblit-1.9.3\ncp ./service-centos.sh /etc/rc.d/init.d/gitblit\nchkconfig --add gitblit\n")])])]),t("p",[s._v("最后验证服务是否能运行，输入命令")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("systemctl start gitblit\nsystemctl status gitblit\n")])])]),t("p",[s._v("出现如下界面，安装运行成功\n"),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0602_3.png")}})]),s._v(" "),t("h2",{attrs:{id:"配置nginx访问端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx访问端口"}},[s._v("#")]),s._v(" 配置Nginx访问端口")]),s._v(" "),t("p",[s._v("最后再配置Nginx，通过外网可以访问gitblit的管理界面，在"),t("code",[s._v("nginx.conf")]),s._v("增加")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vim")]),s._v(" /usr/local/webserver/nginx/conf/nginx.conf\n\nserver")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  repo.luckyzp.top")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("      cert/9815538_repo.luckyzp.top.pem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v("  cert/9815538_repo.luckyzp.top.key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_timeout")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5m")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_ciphers")]),s._v("  HIGH:!aNULL:!MD5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_protocols")]),s._v(" TLSv1.1 TLSv1.2 TLSv1.3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_prefer_server_ciphers")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("on")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" /")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token directive"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("proxy_pass")]),s._v(" https://localhost:8443/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("重启Nginx，输入地址，可以看到gitblit的管理界面了\n"),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0602_4.png")}}),s._v("\n能访问如上界面，安装完成，以上就是安装gitblit的详细步骤")]),s._v(" "),t("h2",{attrs:{id:"常见问题解决方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题解决方式"}},[s._v("#")]),s._v(" 常见问题解决方式")]),s._v(" "),t("h3",{attrs:{id:"一-停止gitblit服务后-站点还能访问-实际服务还在后台运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-停止gitblit服务后-站点还能访问-实际服务还在后台运行"}},[s._v("#")]),s._v(" 一.停止gitblit服务后，站点还能访问，实际服务还在后台运行")]),s._v(" "),t("p",[s._v("解决方式为：修改"),t("code",[s._v("service-centos.sh")]),s._v("文件，修改stop相关代码")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("  stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v("/gitblit.jar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping gitblit server"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v("/gitblit.jar:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v('/ext/*"')]),s._v(" com.gitblit.GitBlitServer "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--baseFolder")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_BASE_FOLDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stop")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RETVAL")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("改为stop指令直接执行"),t("code",[s._v("gitblit-stop.sh")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("div",{staticClass:"highlighted"},[s._v(" ")]),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("  stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v("/gitblit.jar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping gitblit server"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITBLIT_PATH")]),s._v("\n      ./gitblit-stop.sh\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# $JAVA "$GITBLIT_PATH/gitblit.jar:$GITBLIT_PATH/ext/*" com.gitblit.GitBlitServer --baseFolder $GITBLIT_BASE_FOLDER --stop > /dev/null &')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"."')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RETVAL")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("重新创建服务，再重新打开，停止服务就能解决这个问题")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("rm -f /etc/rc.d/init.d/gitblit\ncp /usr/local/src/gitblit-1.9.3/service-centos.sh /etc/rc.d/init.d/gitblit\nsystemctl daemon-reload\n")])])]),t("h3",{attrs:{id:"二-版本库地址显示localhost"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-版本库地址显示localhost"}},[s._v("#")]),s._v(" 二.版本库地址显示localhost")]),s._v(" "),t("p",[s._v("刚部署完成会发现一个问题，所有新建的版本库git地址都不显示IP地址或域名，而是显示localhost\n"),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0605_01.png")}})]),s._v(" "),t("p",[s._v("解决方式为：修改"),t("code",[s._v("defaults.properties")]),s._v("文件")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("web.canonicalUrl = https://repo.luckyzp.top\n")])])]),t("p",[s._v("再重启服务，显示正常了")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/images/linux/wx_0605_02.png")}})])}),[],!1,null,null,null);t.default=n.exports}}]);